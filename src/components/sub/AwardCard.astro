---
import { 
  getAwardType, 
  extractDomain, 
  formatDate, 
  getTimeAgo, 
  getAwardBadgeColor 
} from '../../utils/helpers.js';

const award = Astro.props;
const awardTitle = award.title || award.name || 'Sin título';
const organization = award.awarder || award.issuer || 'Organización';
const awardType = getAwardType(award);
---
<a href={award.url || "javascript:void(0)"} target={award.url ? "_blank" : undefined} rel={award.url ? "noopener noreferrer" : undefined}>
  <div class="relative flex flex-col bg-white dark:bg-black shadow-sm border border-black dark:border-white rounded-xl overflow-hidden">
    
    <!-- Content Section -->
    <div class="p-5">
      <!-- Type Badge -->
      <div class="mb-3 inline-block rounded-full bg-black dark:bg-white py-1 px-3 text-xs text-white dark:text-black uppercase tracking-wide">
        {awardType}
      </div>
      
      <!-- Award Title -->
      <h3 class="text-xl font-bold text-black dark:text-white mb-2">
        {awardTitle}
      </h3>
      <h4 class="text-lg font-medium text-black dark:text-white mb-3">
        {organization}
      </h4>
      {award.url && (
        <div class="flex items-center mb-3 text-sm text-black dark:text-white">
          <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"></path>
          </svg>
          <span>{extractDomain(award.url)}</span>
        </div>
      )}

      <!-- Details -->
      <div class="space-y-2 mb-4">
        <div class="flex items-center space-x-2 text-xs text-black dark:text-white bg-white dark:bg-black rounded p-2 border border-black dark:border-white">
          <div class="w-2 h-2 bg-black dark:bg-white rounded-full"></div>
          <span class="font-medium">Fecha:</span>
          <span>{formatDate(award.date)}</span>
        </div>
      </div>
    </div>

    <!-- Footer -->
    <div class="bg-white dark:bg-black p-4 border-t border-black dark:border-white">
      <div class="flex items-center justify-between">
        <div class="flex items-center">
          <div class="w-10 h-10 bg-black dark:bg-white rounded-lg flex items-center justify-center">
            {awardType === 'Certificate' ? (
              <svg class="w-5 h-5 text-white dark:text-black" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 713.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"></path>
              </svg>
            ) : (
              <svg class="w-5 h-5 text-white dark:text-black" fill="currentColor" viewBox="0 0 20 20">
                <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path>
              </svg>
            )}
          </div>
          <div class="flex flex-col ml-3 text-sm">
            <span class="text-black dark:text-white font-semibold">{formatDate(award.date)}</span>
            <span class="text-black dark:text-white text-xs">{getTimeAgo(award.date)} • {awardType}</span>
          </div>
        </div>
        <div class="text-right">
          <div class="text-xs text-black dark:text-white">Tipo</div>
          <div class="text-sm font-semibold text-black dark:text-white">{awardType}</div>
        </div>
      </div>
    </div>

  </div>
</a>
